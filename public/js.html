<!doctype html>
<html>
    <head>
        <title>Title</title>
        <meta charset="utf-8"/>
        
        <link rel="shortcut icon" href="/images/icons/icon.png"/>
        <link rel="stylesheet" href="/styles/utility.css"/>
        <link rel="stylesheet" href="/styles/main.css"/>
        <link rel="stylesheet" href="/styles/sub.css"/>
        <link rel="stylesheet" href="/styles/toast.css"/>
        <link rel="stylesheet" href="/styles/form.css"/>
        <link rel="stylesheet" href="/styles/utility.css"/>
        <link rel="stylesheet" href="/styles/Chart.min.css"/>
        <script type="text/javascript" src="/scripts/core.js"></script>
        <script type="text/javascript" src="/scripts/toast.js"></script>
        <script type="text/javascript" src="/scripts/mj.js"></script>
        <script type="text/javascript" src="/scripts/xhr.js"></script>
        <script type="text/javascript" src="/scripts/ktemplate.js"></script>
        <script type="text/javascript" src="/scripts/Chart.bundle.min.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    </head>
    <style>
        .area{
            background-color: none;
        }
    </style>
    <body>
        <div class="area">
            <canvas id="bieudo"></canvas>
        </div>
        <script>
            $.ajax().create().url('/api/shop/monthordersalesstatistics?month=5&year=2019').async().success(function(e){
                datas = JSON.parse(this.response).body.data;
            }).get();
            
            data = {};
            data.totalprice = [];
            data.totalorder = [];
            for(d of datas){
                data.totalprice.push(d.totalprice);
                data.totalorder.push(d.totalorder);
            }
            
            labels = [];
            for(i=1; i<=31; i++){
                labels.push(i+'/'+'5'+'/2019');
            }
            
            cbieudo = new Chart(bieudo, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets:[
                        {
                            data: data.totalprice,
                            label: 'Doanh số',
                            fill: false,
                            backgroundColor: 'rgba(255,0,0,0.5)',
                            yAxisID: 'left-y-axis'
                        },
                        {
                            data: data.totalorder,
                            label: 'Số đơn hàng',
                            fill: false,
                            backgroundColor: 'rgba(0,0,255,0.5)',
                            yAxisID: 'right-y-axis'
                        }
                    ]
                },
                options:{
                    scales:{
                        yAxes: [
                            {
                                id: 'left-y-axis',
                                type: 'linear',
                                position: 'left',
                                ticks: {
                                    beginAtZero: true
                                },scaleLabel: {
        display: true,
        labelString: 'Tổng doanh số'
      }
                            },
                            {
                                id: 'right-y-axis',
                                type: 'linear',
                                position: 'right',
                                ticks:{
                                    beginAtZero: true
                                },
                                scaleLabel: {
        display: true,
        labelString: 'Số đơn hàng'
      }
                            }
                        ]
                    },
                    animation:{
                        duration: 0
                    },
                    title:{
                        display: true,
                        text: 'Biểu đồ thống kê doanh số'
                    }
                }
            });
        </script>
    </body>
</html>